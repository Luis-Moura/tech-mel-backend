# ===========================
# CONFIGURACAO DE PRODUCAO
# ===========================

spring.application.name=tech-mel

# URLs
app.url=${APP_URL}
app.url.frontend=${APP_URL_FRONTEND}

# ===========================
# BANCO DE DADOS
# ===========================
spring.datasource.url=${DB_URL}
spring.datasource.username=${DB_USERNAME}
spring.datasource.password=${DB_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect

# PRODUCAO: DDL desabilitado
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false

# Pool de conexoes
spring.datasource.hikari.maximum-pool-size=10
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.max-lifetime=600000

# ===========================
# REDIS
# ===========================
spring.data.redis.host=${REDIS_HOST}
spring.data.redis.port=${REDIS_PORT}
spring.data.redis.password=${REDIS_PASSWORD}
spring.data.redis.timeout=2000ms
spring.data.redis.lettuce.pool.max-active=8
spring.data.redis.lettuce.pool.max-idle=8
spring.data.redis.lettuce.pool.min-idle=2

# ===========================
# JWT
# ===========================
jwt.secret=${JWT_SECRET}
jwt.expiration=${JWT_EXPIRATION}
jwt.refresh-expiration=${JWT_REFRESH_EXPIRATION}

# ===========================
# OAUTH2
# ===========================
spring.security.oauth2.client.registration.google.client-id=${GOOGLE_CLIENT_ID}
spring.security.oauth2.client.registration.google.client-secret=${GOOGLE_CLIENT_SECRET}
spring.security.oauth2.client.registration.google.redirect-uri=${REDIRECT_URI}
app.oauth2.redirect-uri=${FRONTEND_CALLBACK_URI}

# ===========================
# EMAIL
# ===========================
spring.mail.host=${MAIL_HOST}
spring.mail.port=${MAIL_PORT}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.from=${MAIL_FROM}

# ===========================
# LOGGING
# ===========================
logging.level.com.tech_mel.tech_mel=INFO
logging.level.org.springframework.security=WARN
logging.level.org.hibernate.SQL=WARN
logging.pattern.console=%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n

# ===========================
# ACTUATOR (Monitoramento)
# ===========================
management.endpoints.web.exposure.include=health,info,metrics
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true

# ===========================
# SEGURANCA
# ===========================
server.error.include-stacktrace=never
server.error.include-message=never

# admin padrao (sera criado automaticamente se nao existir)
app.admin.default.email=${APP_ADMIN_EMAIL}
app.admin.default.password=${APP_ADMIN_PASSWORD}
app.admin.default.name=Administrador Principal

#mercado pago
mercadopago.access.token=${MERCADO_PAGO_TOKEN}
